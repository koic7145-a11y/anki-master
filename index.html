<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>暗記マスター - エビングハウスの忘却曲線で効率的に記憶</title>
  <meta name="description" content="エビングハウスの忘却曲線に基づくフラッシュカードアプリ。SM-2アルゴリズムで最適なタイミングで復習。">
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#ffffff">
  <link rel="icon" href="./icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="./icon.svg">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="header-inner">
        <div class="header-left">
          <span class="header-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 19.5A2.5 2.5 0 016.5 17H20" />
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z" />
            </svg></span>
          <h1 class="header-title">暗記マスター</h1>
        </div>
        <div class="header-right">
          <div class="sync-indicator" id="syncIndicator">
            <span class="sync-dot offline"></span>
            <span class="sync-text" id="syncText">未接続</span>
          </div>
          <button class="header-btn" id="headerSyncBtn" title="同期">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0118.8-4.3M22 12.5a10 10 0 01-18.8 4.2" />
            </svg>
          </button>
          <button class="header-btn hidden" id="headerLogoutBtn" title="ログアウト">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9" />
            </svg>
          </button>
          <button class="header-btn" id="settingsBtn" title="設定">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3" />
              <path
                d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 112.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
            </svg>
          </button>
        </div>
      </div>
      <p class="header-subtitle">エビングハウスの忘却曲線で効率的に記憶</p>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Stats Dashboard -->
      <section class="section">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-emoji"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <polygon points="12 2 2 7 12 12 22 7 12 2" />
                <polyline points="2 17 12 22 22 17" />
                <polyline points="2 12 12 17 22 12" />
              </svg></div>
            <div class="stat-value" id="statTotal">0</div>
            <div class="stat-label">総カード</div>
          </div>
          <div class="stat-card">
            <div class="stat-emoji"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10" />
                <circle cx="12" cy="12" r="6" />
                <circle cx="12" cy="12" r="2" />
              </svg></div>
            <div class="stat-value" id="statToday">0</div>
            <div class="stat-label">復習待ち</div>
          </div>
          <div class="stat-card">
            <div class="stat-emoji"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
                <polyline points="22 4 12 14.01 9 11.01" />
              </svg></div>
            <div class="stat-value" id="statMastered">0</div>
            <div class="stat-label">習得済み</div>
          </div>
          <div class="stat-card">
            <div class="stat-emoji"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
              </svg></div>
            <div class="stat-value" id="statStreak">0</div>
            <div class="stat-label">連続日数</div>
          </div>
        </div>
      </section>

      <!-- Category Accuracy -->
      <section class="section">
        <h2 class="section-title"><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2" stroke-linecap="round">
            <line x1="18" y1="20" x2="18" y2="10" />
            <line x1="12" y1="20" x2="12" y2="4" />
            <line x1="6" y1="20" x2="6" y2="14" />
          </svg> 分野別正答率</h2>
        <div id="accuracyList" class="accuracy-list">
          <div class="empty-state">学習データがありません</div>
        </div>
      </section>

      <!-- Add Card Form -->
      <section class="section">
        <h2 class="section-title"><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2" stroke-linecap="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="8" x2="12" y2="16" />
            <line x1="8" y1="12" x2="16" y2="12" />
          </svg> カードを追加</h2>
        <div class="card-form">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">問題画像</label>
              <div class="upload-zone" id="questionUploadZone" tabindex="0">
                <svg viewBox="0 0 24 24">
                  <path
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
                <div class="upload-zone-text">クリック / ドロップ / Ctrl+V</div>
                <div class="upload-zone-hint">画像をアップロード</div>
                <input type="file" id="questionFileInput" accept="image/*">
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">解答画像</label>
              <div class="upload-zone" id="answerUploadZone" tabindex="0">
                <svg viewBox="0 0 24 24">
                  <path
                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
                <div class="upload-zone-text">クリック / ドロップ / Ctrl+V</div>
                <div class="upload-zone-hint">画像をアップロード</div>
                <input type="file" id="answerFileInput" accept="image/*">
              </div>
            </div>
          </div>

          <div class="form-group" id="deckSelectionSection">
            <label class="form-label">デッキ（分野）</label>
            <div class="deck-select-row">
              <select class="form-select" id="categorySelect">
                <option value="">デッキを選択してください</option>
              </select>
              <button class="btn-icon" id="newDeckBtn" title="新しいデッキ">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round">
                  <line x1="12" y1="5" x2="12" y2="19" />
                  <line x1="5" y1="12" x2="19" y2="12" />
                </svg>
              </button>
            </div>
            <div class="new-deck-input hidden" id="newDeckInput">
              <select class="form-select" id="presetDeckSelect">
                <option value="">プリセットから選択...</option>
                <optgroup label="テクノロジ系">
                  <option value="基礎理論">基礎理論</option>
                  <option value="コンピュータシステム">コンピュータシステム</option>
                  <option value="データベース">データベース</option>
                  <option value="ネットワーク">ネットワーク</option>
                  <option value="セキュリティ">セキュリティ</option>
                  <option value="システム開発">システム開発</option>
                </optgroup>
                <optgroup label="マネジメント系">
                  <option value="プロジェクトマネジメント">プロジェクトマネジメント</option>
                  <option value="サービスマネジメント">サービスマネジメント</option>
                </optgroup>
                <optgroup label="ストラテジ系">
                  <option value="システム戦略">システム戦略</option>
                  <option value="経営戦略">経営戦略</option>
                  <option value="企業と法務">企業と法務</option>
                </optgroup>
              </select>
              <span class="deck-or-label">または</span>
              <input type="text" class="form-input" id="newDeckName" placeholder="カスタム名を入力">
              <button class="btn btn-sm btn-primary" id="createDeckBtn">作成</button>
              <button class="btn btn-sm btn-secondary" id="cancelNewDeckBtn">取消</button>
            </div>
          </div>

          <div class="toggle-row">
            <span class="toggle-label">連続登録モード</span>
            <label class="toggle-switch">
              <input type="checkbox" id="continuousMode">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="form-actions">
            <button class="btn btn-primary" id="addCardBtn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" />
                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" />
              </svg> カードを追加</button>
            <button class="btn btn-secondary" id="clearFormBtn">クリア</button>
          </div>
        </div>
      </section>

      <!-- Today's Review -->
      <section class="section">
        <h2 class="section-title"><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z" />
            <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z" />
          </svg> 今日の復習</h2>
        <div id="reviewSection">
          <div class="no-review">
            <div class="no-review-icon"><svg width="32" height="32" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <polygon
                  points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
              </svg></div>
            <div class="no-review-text">今日復習するカードはありません！</div>
          </div>
        </div>
      </section>

      <!-- Card List by Category -->
      <section class="section">
        <h2 class="section-title"><svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z" />
          </svg> 分野別問題</h2>
        <div class="category-tabs" id="categoryTabs"></div>
        <div class="search-bar">
          <svg viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8" fill="none" stroke="currentColor" stroke-width="2" />
            <path d="M21 21l-4.35-4.35" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
          <input type="text" id="searchInput" placeholder="カードを検索...">
        </div>
        <div class="card-list" id="cardList">
          <div class="empty-state">カードがありません</div>
        </div>
      </section>
    </main>
  </div>

  <!-- Study Modal -->
  <div class="modal-overlay study-modal" id="studyModal">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title" id="studyModalTitle">復習中</span>
        <button class="modal-close" id="studyModalClose">
          <svg viewBox="0 0 24 24">
            <path d="M18 6L6 18M6 6l12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="progress-container">
          <div class="progress-text">
            <span id="progressLabel">0 / 0</span>
            <span id="progressPercent">0%</span>
          </div>
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="progressBar" style="width:0%"></div>
          </div>
        </div>
        <div class="flashcard-container">
          <div class="flashcard" id="flashcard">
            <div class="flashcard-face flashcard-front">
              <div class="flashcard-label">QUESTION</div>
              <div class="flashcard-content" id="flashcardFront"></div>
              <div class="flashcard-hint">タップで解答を表示</div>
            </div>
            <div class="flashcard-face flashcard-back">
              <div class="flashcard-label">ANSWER</div>
              <div class="flashcard-content" id="flashcardBack"></div>
            </div>
          </div>
        </div>
        <!-- SM-2 Answer Buttons -->
        <div class="answer-buttons hidden" id="answerButtons">
          <button class="btn btn-again" id="btnAgain">もう一度<span class="btn-interval" id="intervalAgain"></span></button>
          <button class="btn btn-hard" id="btnHard">難しい<span class="btn-interval" id="intervalHard"></span></button>
          <button class="btn btn-good" id="btnGood">普通<span class="btn-interval" id="intervalGood"></span></button>
          <button class="btn btn-easy" id="btnEasy">簡単<span class="btn-interval" id="intervalEasy"></span></button>
        </div>
        <!-- Practice Mode Buttons -->
        <div class="answer-buttons hidden" id="practiceButtons">
          <button class="btn btn-again" id="btnRetry" style="grid-column: span 2;">○ 正解 / × 不正解（もう一度）</button>
          <button class="btn btn-good" id="btnFinish" style="grid-column: span 2;">終了</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="modal-overlay edit-modal" id="editModal">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title">カードを編集</span>
        <button class="modal-close" id="editModalClose">
          <svg viewBox="0 0 24 24">
            <path d="M18 6L6 18M6 6l12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <form class="edit-form" onsubmit="return false;">
          <input type="hidden" id="editCardId">
          <div class="form-group">
            <label class="form-label">問題テキスト</label>
            <textarea class="form-input" id="editQuestion" rows="3"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">解答テキスト</label>
            <textarea class="form-input" id="editAnswer" rows="3"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">デッキ（分野）</label>
            <select class="form-select" id="editCategory"></select>
          </div>
          <div class="form-actions">
            <button class="btn btn-primary" id="saveEditBtn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" />
                <polyline points="17 21 17 13 7 13 7 21" />
                <polyline points="7 3 7 8 15 8" />
              </svg> 保存</button>
            <button class="btn btn-secondary" id="cancelEditBtn">キャンセル</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Complete Modal -->
  <div class="modal-overlay complete-modal" id="completeModal">
    <div class="modal">
      <div class="modal-body" style="text-align:center;padding:40px 20px;">
        <div class="complete-icon" id="completeIcon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
          </svg></div>
        <div class="complete-title" id="completeTitle">学習完了！</div>
        <div class="complete-stats" id="completeStats"></div>
        <div class="complete-message" id="completeMessage"></div>
        <button class="btn btn-primary" id="completeCloseBtn">閉じる</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="settingsModal">
    <div class="modal" style="max-width:480px;">
      <div class="modal-header">
        <span class="modal-title"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3" />
            <path
              d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 112.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
          </svg> 設定</span>
        <button class="modal-close" id="settingsCloseBtn">
          <svg viewBox="0 0 24 24">
            <path d="M18 6L6 18M6 6l12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <!-- Sync Section -->
        <div class="setting-item">
          <h3><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z" />
            </svg> クラウド同期</h3>
          <p style="font-size:0.85rem;color:var(--text-secondary);margin:6px 0 12px;">
            アカウントでログインすると、PC・スマホ間でデータが自動同期されます。</p>

          <!-- Auth Form -->
          <div id="authFormSection">
            <div style="display:flex;gap:6px;margin-bottom:12px;">
              <button class="btn btn-sm btn-primary" id="authTabLogin"
                onclick="document.getElementById('authSubmitBtn').dataset.mode='login';document.getElementById('authSubmitBtn').textContent='ログイン';document.getElementById('authTabLogin').classList.add('btn-primary');document.getElementById('authTabLogin').classList.remove('btn-secondary');document.getElementById('authTabSignup').classList.add('btn-secondary');document.getElementById('authTabSignup').classList.remove('btn-primary');document.getElementById('authPasswordConfirmGroup').classList.add('hidden');">ログイン</button>
              <button class="btn btn-sm btn-secondary" id="authTabSignup"
                onclick="document.getElementById('authSubmitBtn').dataset.mode='signup';document.getElementById('authSubmitBtn').textContent='新規登録';document.getElementById('authTabSignup').classList.add('btn-primary');document.getElementById('authTabSignup').classList.remove('btn-secondary');document.getElementById('authTabLogin').classList.add('btn-secondary');document.getElementById('authTabLogin').classList.remove('btn-primary');document.getElementById('authPasswordConfirmGroup').classList.remove('hidden');">新規登録</button>
            </div>
            <div class="form-group">
              <input type="email" class="form-input" id="authEmail" placeholder="メールアドレス">
            </div>
            <div class="form-group">
              <input type="password" class="form-input" id="authPassword" placeholder="パスワード">
            </div>
            <div class="form-group hidden" id="authPasswordConfirmGroup">
              <input type="password" class="form-input" id="authPasswordConfirm" placeholder="パスワード（確認）">
            </div>
            <div class="form-group" style="color:#ef4444;font-size:0.82rem;display:none;" id="authError"></div>
            <button class="btn btn-primary btn-block" id="authSubmitBtn" data-mode="login">ログイン</button>
          </div>

          <!-- Logged In -->
          <div id="loggedInSection" class="hidden">
            <p style="font-size:0.85rem;margin-bottom:8px;">ログイン中: <strong id="loggedInEmail"></strong></p>
            <p style="font-size:0.75rem;color:var(--text-tertiary);" id="lastSyncTime"></p>
          </div>
        </div>

        <hr style="border:none;border-top:1px solid var(--border-color);margin:20px 0;">

        <!-- Data Management -->
        <div class="setting-item">
          <h3><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z" />
            </svg> データ管理</h3>
          <p style="font-size:0.85rem;color:var(--text-secondary);margin:6px 0 12px;">JSON形式でデータの書き出し・読み込みができます。</p>
          <div style="display:flex;gap:8px;">
            <button class="btn btn-secondary" id="exportDataBtn"><svg width="14" height="14" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg> 書き出し</button>
            <button class="btn btn-secondary" id="importDataBtn"><svg width="14" height="14" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" y1="15" x2="12" y2="3" />
              </svg> 読み込み</button>
            <input type="file" id="importFileInput" accept=".json" style="display:none;">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/dexie@3.2.4/dist/dexie.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script>
    // Fallback: if jsdelivr fails, try unpkg
    if (typeof supabase === 'undefined') {
      document.write('<script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.min.js"><\/script>');
    }
  </script>
  <script src="./db.js"></script>
  <script src="./supabase-sync.js"></script>
  <script src="./app.js"></script>
</body>

</html>